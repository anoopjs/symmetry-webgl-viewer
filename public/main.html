<!DOCTYPE html>
<head>
<meta charset="utf-8">
<title>Computer Graphics e0275</title>
<style>
body {
}
canvas {
width : 1200px;
height : 800px;
background : black;
}
</style>

<script type='text/javascript' src='js/gl-matrix-min.js'></script>
<script type='text/javascript' src='js/jquery.js'></script>
<script type='text/javascript' src='js/utils.js'></script>
<script type='text/javascript' src='js/Camera.js'></script>
<script type='text/javascript' src='js/CameraInteractor.js'></script>
<script id="shader-fs" type="x-shader/x-fragment">
#ifdef GL_ES
precision highp float;
#endif

uniform float uShininess;       
uniform vec4 uLightAmbient;     
uniform vec4 uLightDiffuse;     
uniform vec4 uMaterialDiffuse;  

varying vec3 vNormal;
varying vec3 vLightDir;
varying vec3 vEyeVec;
varying vec3 vColor;

void main(void)
{
 vec3 L = normalize(vLightDir);
 vec3 N = normalize(vNormal);
 
 float lambertTerm = dot(N,-L);
 
 vec4 Ia = uLightAmbient;
 
 vec4 Id = vec4(0.0,0.0,0.0,0.0);
 
 vec4 Is = vec4(0.0,0.0,0.0,0.0);

 if(lambertTerm < 0.0)
  lambertTerm = -lambertTerm;

 if(lambertTerm > 0.0)
 {
//  Id = uMaterialDiffuse * lambertTerm;
    Id = vec4(vColor, 0.5) * lambertTerm;
  
  vec3 E = normalize(vEyeVec);
  vec3 R = reflect(L, N);
  float specular = pow( max(dot(R, E), 0.0), uShininess);
  
  Is = uLightDiffuse * specular; 
 }
 
 vec4 finalColor = Ia + Id + Is;
// finalColor.a = 1.0;
 
 gl_FragColor = finalColor;
}
</script>

<script id="shader-vs" type="x-shader/x-vertex">
attribute vec3 aVertexPosition;
attribute vec3 aVertexNormal;
attribute vec3 aVertexColor;

uniform mat4 uMVMatrix; 
uniform mat4 uPMatrix; 
uniform mat4 uNMatrix; 

uniform vec3 uLightPosition;

varying vec3 vNormal;
varying vec3 vLightDir;
varying vec3 vEyeVec;
varying vec3 vColor;

void main(void) {

 vec4 vertex = uMVMatrix * vec4(aVertexPosition, 1.0);
 
 vNormal = vec3(uNMatrix * vec4(aVertexNormal, 0.0));

 vLightDir = vertex.xyz - uLightPosition;
 
 vEyeVec = -vec3(vertex.xyz);

 vColor = aVertexColor;

 gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
 
}
</script>


<script type="text/javascript" src="script.js">
</script>
</head>
<body onload="start()">
<canvas id="canvas-element-id" width="1200px" height="800px"></canvas>
</body>
</html>

